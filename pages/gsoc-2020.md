---
layout: default
---


[Main Page](https://spell.github.io/)

## Google Summer of Code 2020 Work Product Submission
_August 31, 2020_

#### Student
Simon Pelletier

#### Organization
[INCF](https://www.incf.org/) -- International Neuroinformatics Coordinating Facility

#### Project Title
Improve [LORIS](http://loris.ca/) API development and documentation

#### Mentors
Christine Rogers, Xavier Lecours-Boucher

### Project Proposal 
1) Improvement of existing API endpoints and solving priority issues for API infrastructure <br/>
2) Develop new workflow templates <br/>
3) Creating new endpoints for modules of Loris <br/>
4) Writing the documentation <br/>
5) Provide comprehensive tutorials in Jupyter notebooks as examples of how to use the API new endpoints


### Project Description and Overview

Loris uses a LAMP structure (Linux, Apache, MySQLandPHP), so the endpoints use http requests to communicate to the 
database. The API ease data acquisition from a scripting language, such as Python or R. In addition to improving the 
API, I wrote documentation , in the form of Jupyter notebooks, on how to use each endpoint of the API with python.
Each endpoint will have documentation and examples on how to use them. 

I also developed work flow tutorials in the form of Jupyter notebooks. These tutorials demonstrate how to use the 
API's endpoints to download all images and electrophysiology recordings contained in a project. I also demonstrate how
to create a 
 Having thorough documentation 
is a must,but having tutorials with many examples on how to use the data acquired with the API by the user is almost
just as important. It is usually much simpler to understand the service delivered by the API with an example. 
The notebooks I shall create would be applied examples of how to use the API insubsequent steps for the data analysis.
The goal is not to create additional modules to analyse the data or make an exhaustive list of possible subsequent
analysis, but it is usually very helpful as as tartingpointfortheusersandmightshowhowusefulLORIScouldbeifusedaspartofneuroinformaticsworkflows.ThetoolsIwillbeusingfortheprojectwillbemostly:HTTP,PHP,REST,PSR15,python + Jupyter,  and OpenAPI 3.0 + Swagger

### Summer Timeline
May
setting up loris, the data. Getting to know how to

May-June
Write a tests suite for LORIS v.23.0 REST API endpoints
Each endpoint supports a specific set of HTTP Request Method(s) and for each of them:
- Make sure that providing valid input following the specification, the appropriate response is returned. Validate: 
    - Status code  
    - Headers
    - Content (if applicable)

Most of the work was done by the end of july. It took 

#### Jupyter notebooks (1 per step; total 2):

##### Step 1: Make examples to display how to use each of the endpoints. -- target ~July 24

The endpoints in api/v0.0.3/candidates have methods for GET requests to explore the data in the database. They also have methods to modify the database with POST, PATCH and PUT requests. 
The endpoints in  api/v0.0.3/projects only allow for GET requests. These endpoints are particularly useful to download all the data contained in a project and build datasets for subsequent analysis (e.g. using python or R).

##### Step 2: Make examples to display how to use the data How to create numpy and pandas objects and subsequent analysis (using python, but it is possible to use R in jupyter notebooks too)

Preprocessing      -- target ~July 31
How to create numpy and pandas objects 
Normalisation and standardisation
For Machine Learning: methods for data augmentation

Machine learning algorithms -- target if time available
Examples of simple ML algorithms using sklearn (e.g. linear models, PCA...)
Examples of simple Deep Learning algorithms that use data from a Loris instance (Convolutional Neural Networks for 3D images and EEG data, Recurrent Neural Networks to analyse longitudinal data)
      


### Summer project presentation (August 18th)

On August 18th, I presented the work I have done on the API during my Google Summer of Code. 



### Merged Prs

[PR #6601](https://github.com/aces/Loris/pull/6601) API Test Plan

[PR #6672](https://github.com/aces/Loris/pull/6672) API Bugs fix

[PR #6828](https://github.com/aces/Loris/pull/6828) Display error message when MINCToolsPath is not configured

[PR #6671] (https://github.com/aces/Loris/pull/6671) Creation of a new integration test suite 
    • 44 endpoints tested (557 assertions)
    • 16 endpoint tests skipped because of missing data in docker environment (Issue #6909)

Developing a whole new integration tests suite for the API was not planned in the proposed project for the summer. 
The proposal included writing tests for the endpoints I would create, but it was not mentioned in the proposal I would 
be writing the whole integration test suite, even for the more than 60 already existing endpoints, with all the 
difficulties that come with starting the test suite. The plan was to write the tests imediatly when I create new 
endpoints, which after creating the integration test suite will be quite easy. What has taken a very long time was not 
in the writing of the tests themselves, but how to connect to the API successfully using the scripts for testing that 
already exist. Still, it has been an enriching experience, but this extra work turned out to be one of my main 
contribution for the summer.


### Open PRs

[PR #6775](https://github.com/aces/Loris/pull/6775) New endpoint for Projects Dicoms

[PR #6780](https://github.com/aces/Loris/pull/6775) PUT and PATCH methods added to endpoint 
candidates/{dandid}/{visit}/instruments/{instrument}/flags

[PR #6905](https://github.com/aces/Loris/pull/6905) Add missing files paths to attributes list

[PR #6899](https://github.com/aces/Loris/pull/6899) New features for Dicoms and images endpoints

[PR #6854](https://github.com/aces/Loris/pull/6854) Jupyter Notebooks to demonstrate how to use the 
API:[LORIS-API\_PART1-HTTP](https://colab.research.google.com/github/spell00/Loris/blob/2020-07-20-jupyterApiPart2/docs/notebooks/LORIS-API_Part1-HTTP.ipynib) 
and [LORIS-API-Python-script](https://colab.research.google.com/github/spell00/Loris/blob/2020-07-20-jupyterApiPart2/docs/notebooks/LORIS-API_Part2-Python-script.ipynb) 

[PR #6890](https://github.com/aces/Loris/pull/6905) Creation of an imaging dataset LORIS-API_PART3-Create_image_dataset



